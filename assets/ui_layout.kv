#:import hex_color kivy.utils.get_color_from_hex
#:import Window kivy.core.window.Window

<GameWidget>:
    canvas.before:
        Color:
            rgb: hex_color('#FFFFFF')
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        id: score_label
        pos: self.height, root.height - 2 * self.height
        text: '0'
        color: hex_color('#555555')
        size: self.texture_size
        font_name: 'assets/fonts/whirlybird_font.ttf'
    Player:
        id: player_widget
        size:
            min(root.width, root.height) * 0.13,\
            min(root.width, root.height) * 0.12
        pos:
            root.center_x - min(root.width, root.height) * 0.06,\
            root.center_y - min(root.width, root.height) * 0.06


<Player>:
    Image:
        id: image
        size: root.size
        pos: root.pos
        source: 'assets/images/player_r.png'
    Image:
        id: hat
        size:
            root.width * 7 / 13,\
            root.height * 4 / 12
        pos:
            root.x + root.width * 3 / 13,\
            root.y + root.height * 8 / 12
        source: 'assets/images/hat_void.png'


<Platform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.03
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/platform.png'


<Cloud>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.05
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/cloud.png'


<BreakablePlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.03
    Image:
        id: image
        size: root.size
        pos: root.pos
        source: 'assets/images/platform_breakable.png'


<Springboard>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.05
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/springboard.png'


<MovingPlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.05
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/platform_moving.png'


<PhasePlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.03
    Image:
        id: image
        size: root.size
        pos: root.pos
        source: 'assets/images/platform_phase.png'


<Spikes>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.08
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/spikes.png'


<SpikeBall>:
    size:
        (min(Window.width, Window.height) * 0.13,) * 2
    Image:
        id: image
        size: root.size
        pos: root.pos
        source: 'assets/images/spikeball_enabled.png'


<HattedPlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.09
    Image:
        id: hat
        size:
            min(Window.width, Window.height) * 0.07,\
            min(Window.width, Window.height) * 0.04
        pos:
            root.x + min(Window.width, Window.height) * 0.03,\
            root.y + min(Window.width, Window.height) * 0.05
        source: f"assets/images/{app.config['hat_sprite']}.png"
    Platform:
        id: platform
        pos: root.pos


<HattedBreakablePlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.09
    Image:
        id: hat
        size:
            min(Window.width, Window.height) * 0.07,\
            min(Window.width, Window.height) * 0.04
        pos:
            root.x + min(Window.width, Window.height) * 0.03,\
            root.y + min(Window.width, Window.height) * 0.05
        source: f"assets/images/{app.config['hat_sprite']}.png"
    BreakablePlatform:
        id: platform
        pos: root.pos


<HattedMovingPlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.11
    Image:
        id: hat
        size:
            min(Window.width, Window.height) * 0.07,\
            min(Window.width, Window.height) * 0.04
        pos:
            root.x + min(Window.width, Window.height) * 0.03,\
            root.y + min(Window.width, Window.height) * 0.07
        source: f"assets/images/{app.config['hat_sprite']}.png"
    MovingPlatform:
        id: platform
        pos: root.pos


<HattedPhasePlatform>:
    size:
        min(Window.width, Window.height) * 0.13,\
        min(Window.width, Window.height) * 0.09
    Image:
        id: hat
        size:
            min(Window.width, Window.height) * 0.07,\
            min(Window.width, Window.height) * 0.04
        pos:
            root.x + min(Window.width, Window.height) * 0.03,\
            root.y + min(Window.width, Window.height) * 0.05
        source: f"assets/images/{app.config['hat_sprite']}.png"
    PhasePlatform:
        id: platform
        pos: root.pos


<GameOverWidget>:
    canvas.before:
        Color:
            rgb: hex_color('#FFFFFF')
        Rectangle:
            pos: self.pos
            size: self.size
    Image:
        source: 'assets/images/game_over_label.png'
        pos:
            (Window.width - self.width) / 2,\
            Window.height * 0.75 - self.height / 2
        size:
            min(Window.width, Window.height) * 0.31,\
            min(Window.width, Window.height) * 0.17
    RetryButton:
        pos:
            (Window.width - self.width) / 2,\
            Window.height * 0.25 - self.height / 2
    Label:
        pos: root.width - self.width - self.height, self.height
        id: version
        color: hex_color('#555555')
        size: self.texture_size
        font_name: 'assets/fonts/whirlybird_font.ttf'


<RetryButton>:
    size:
        min(Window.width, Window.height) * 0.24,\
        min(Window.width, Window.height) * 0.12
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/retry.png'


<PauseWidget>:
    canvas.before:
        Color:
            rgb: hex_color('#FFFFFF')
        Rectangle:
            pos: self.pos
            size: self.size
    PlayButton:
        pos:
            (Window.width - self.width) / 2,\
            (Window.height - self.height) / 2
    Label:
        pos: root.width - self.width - self.height, self.height
        id: version
        color: hex_color('#555555')
        size: self.texture_size
        font_name: 'assets/fonts/whirlybird_font.ttf'


<PlayButton>:
    size:
        min(Window.width, Window.height) * 0.24,\
        min(Window.width, Window.height) * 0.12
    Image:
        size: root.size
        pos: root.pos
        source: 'assets/images/play.png'
